<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
	crossorigin="anonymous">
<title>Insert title here</title>
</head>
<body>
	<h1 th:text="${board.title}"></h1>
	<table>
		<tr>
			<td>내용</td>
			<td th:text="${board.content}"></td>
		</tr>
		<tr>
			<td>작성자</td>
			<td th:text="${board.writer}"></td>
		</tr>
		<tr>
			<td>등록일</td>
			<td th:text="${board.regdate}"></td>
		</tr>
		<tr>
			<td>업데이트일</td>
			<td th:text="${board.updatedate}"></td>
		</tr>
	</table>

	<!-- 게시글 단건조회 시작 -->

	<!-- 게시글 단건조회 끝 -->
	<div id="replyList"></div>
	<!-- 댓글시작 -->
	<table class="table">
		<form name="replyForm">
			<div class="row">
				<div class="col-6">
					<input name="reply" class="form-control">
				</div>
				<div class="col-3">
					<input name="replyer" class="form-control">
				</div>
				<div class="col-3">
					<input name="replyer" type="hidden" class="form-control"
						th:value="${board.bno}">
				</div>
				<div class="col-3">
					<button type="button" class="btnReplyInsert">댓글저장</button>
				</div>
			</div>
		</form>
	</table>
	<!-- 댓글 끝 -->

</body>
<script>
// 등록함수실행
replyInsert();

/*-------------------------------------
등록 버튼 이벤트 지정
---------------------------------------*/	
const url = "/reply";

function replyInsert(){
	document.querySelector(".btnReplyInsert").addEventListener("click", function(){

		//파라미터 만들기
		const reply = replyForm.reply.value;
		const replyer = replyForm.replyer.value;
		const bno = replyForm.bno.value;
		const param = {reply, replyer, bno}
		
		//등록 요청
		fetch(url, {
			method:"post",
			headers: {
			      "Content-Type": "application/json",
			      // 'Content-Type': 'application/x-www-form-urlencoded',
			    },
			body : JSON.stringify(param), 
		})
		.then( result => result.text() )
		.then( result => alert(result) )
		//.then( result => replyList() )
	})
} 

</script>
</html>