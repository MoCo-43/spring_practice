<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.board.mapper.BoardMapper">

<!-- 게시글-여러댓글 => 1:N 관계이므로 Collection 사용-->
  <resultMap id="boardMap" type="BoardVO">
    <id     property="bno"        column="bno"/>
    <result property="title"      column="title"/>
    <result property="content"    column="content"/>
    <result property="writer"     column="writer"/>
    <result property="regdate"    column="regdate"/>
    <result property="updatedate" column="updatedate"/>

    <collection property="replylist"
                ofType="ReplyVO"
                column="bno"
                select="selectReplyByBno"/>
  </resultMap>


<!-- 게시글 전체조회 -->
<select id="selectBoard">
  SELECT *
  FROM   tbl_board
</select>

<!-- 게시글 단건조회 -->
<select id="selectBoardByBno" resultMap="boardMap" parameterType="Long">
  SELECT bno,
         title,
         content,
         writer,
         regdate,
         updatedate
  FROM   tbl_board
  WHERE  bno = #{bno}
</select>

<!-- 단건 댓글 -->
<select id="selectReplyByBno" resultType="replyVO" parameterType="Long">
  SELECT *
  FROM  tbl_reply
  WHERE bno = #{bno}
</select>

</mapper>